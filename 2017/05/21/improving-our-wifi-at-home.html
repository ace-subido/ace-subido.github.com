<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Improving our WiFi at home</title>
  <meta name="description" content="So, I’m in the process of trying to get the best performance out of our internet setup at home. I’ve worked with Network Architects and ansible’d network con...">

  <meta name="twitter:card" content="summary_large_image">
  <meta content="acesubido" property="og:site_name">

  
    <meta content="Improving our WiFi at home" property="og:title">
    <meta content="Improving our WiFi at home" property="twitter:title">
  

  
    <meta content="article" property="og:type">
  

  
    <meta content="So, I’m in the process of trying to get the best performance out of our internet setup at home. I’ve worked with Network Architects and ansible’d network con..." property="og:description">
    <meta content="So, I’m in the process of trying to get the best performance out of our internet setup at home. I’ve worked with Network Architects and ansible’d network con..." property="twitter:description">
  

  
    <meta content="https://acesubido.net/2017/05/21/improving-our-wifi-at-home.html" property="og:url">
  

  
    <meta content="2017-05-21T00:00:00+08:00" property="article:published_time">
    <meta content="https://acesubido.net/about/" property="article:author">
  

  
    <meta content="https://acesubido.net/img/blog/ourwifisetup-archer-c7.jpg" property="og:image">
    <meta content="https://acesubido.net/img/blog/ourwifisetup-archer-c7.jpg" property="twitter:image">
  

  <link rel="stylesheet" href="https://acesubido.net/css/main.css">
  <link rel="canonical" href="https://acesubido.net/2017/05/21/improving-our-wifi-at-home.html">
  <link rel="alternate" type="application/rss+xml" title="acesubido" href="/feed.xml" />
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
</head>

  <body>
    <header class="site-header">
  <div class="site-title">
    <ul class="navigation-links-list">
      <li>
        acesubido
        &mdash;
      </li>
      <li>
        <a href="/">home</a>
      </li>
      <li>
        <a href="/posts">blog</a>
      </li>
      <li>
        <a href="/feed.xml">rss feed</a>
      </li>
    </ul>
  </div>
</header>

    <div class="container">
      <section class="post-full">
  <header>
    <span class="post-date text-muted">
      May 21, 2017
      
      
    </span>
    <h1 class="post-full-title">Improving our WiFi at home</h1>
  </header>
  <article>
    <p>So, I’m in the process of trying to get the best performance out of our internet setup at home. I’ve worked with Network Architects and ansible’d network configurations for large Hadoop clusters that transfer terabytes, but sadly, I haven’t sat down and fixed our internet at home. I’m a software engineer, and no means a hardcore Cisco Certified Network Engineer, so I decided to sit on this problem and try to improve our situation.</p>

<p>If you have slow internet, you can’t just keep throwing money at the problem by upgrading your ISP subscription. You’ll have to check off problems one by one. For me, I sat down and thought: I’ll have to start by improving what I can improve on my side. Which means, the WiFi network within our home.</p>

<p>To give a short background, our current internet setup at home looks like this:</p>

<p><img src="/img/blog/ourwifisetup.png" alt="" /></p>

<p>Almost everyone probably has this simple setup, unless you have a mansion and you need to cover every inch of your house, including your garden and pool.</p>

<p>So, I open up terminals and do some <code class="highlighter-rouge">iperf</code> and <code class="highlighter-rouge">nc</code> tests. Initial results revealed that network between 2 local IP addresses in our network is both slow and experiences packet loss. In layman’s terms: our wifi coverage and network throughput generally suck. Beyond the terminal, it’s pretty apparent. A LAN game of “Starcraft: Brood War” between 2 laptops connected on the same network via Wifi, to the same router, is pretty laggy.</p>

<p>So it’s time to really improve our WiFi coverage.</p>

<h4 id="what-we-bought-and-what-we-will-buy">What we bought and what we will buy</h4>

<p>From the earlier diagram, “Our Wifi Router” and “Our Repeater” we’re bought at PC Express. The router and repeater we have are very old Linksys models, RE1000 for the Repeater and WRT120 for the router. RE1000 was purchased around 2012 and the WRT120N was purchased around 2010. We plan to buy new ones, but should be under a specific budget: 8,000PHP for a router, and 8,000PHP for a repeater. I know that sounds a lot, but I’m currently working from home and would need the internet at our house really worked up. What we plan to buy are the following:</p>

<h4 id="for-the-router-we-chose-the-tp-link-archer-c7-v2">For the router we chose the TP-Link Archer C7 V2</h4>

<p><img src="/img/blog/ourwifisetup-archer-c7.jpg" alt="" /></p>

<p><a href="http://thewirecutter.com/reviews/best-wi-fi-router/">An extensive review was made on it</a> and it’s pretty cheap compared to the other options. It’s also tested against a multi-room house like ours.</p>

<h4 id="for-the-repeater-we-chose-the-tp-link-re580d-wifi-extender">For the repeater we chose the TP-Link RE580D WiFi Extender</h4>

<p><img src="/img/blog/ourwifisetup-re580d.jpg" alt="" /></p>

<p>Looking for a counterpart to the router, it seems that Netgear Nighthawk EX7000 or EX6200 takes the cake. But there’s no way to purchase it conveniently here in the Philippines, so I came across this TP-Link extender, and the <a href="http://www.tomsguide.com/us/best-wifi-extenders,review-2225.html">review’s are good</a></p>

<h3 id="optimizing-the-network">Optimizing the Network</h3>

<p>But before we purchase this, I’ll have to optimize our network first and do a benchmark. Here’s what I found out about tinkering with our routers and such:</p>

<h4 id="for-the-main-router">For The Main Router</h4>

<ul>
  <li>Depending on your ISP, it’s best to set some DNS Servers on the main router. Google (8.8.8.8 and 8.8.4.4) and OpenDNS Servers (208.67.222.222 and 208.67.220.220) are best. Personally, we use PLDT, so I leave this blank. Using Google or OpenDNS as your DNS Servers seems a good idea but not for us. Based on my experience, for PLDT MyDSL Home connections, PLDT optimizes their connections with PLDT’s DNS Servers. Otherwise, you get bogged down by a lot of “Resolving Host” issues. A minor compromise.</li>
  <li>On “Channel Width”, as much as possible, set it to 40MHz wide channels. You get the best peformance out of your router. But only use this if all of your devices support 802.11n. Otherwise, just use the 20MHz default.</li>
  <li>Set your “Standard Channel” to some other channel that’s not common with other Wifi Signals in your area. Use a Wifi scanner (install one in your Android phone) and scan your area for other Wifi signals, there you’ll see the channels their using. If you set your “Standard Channel” to something uncommon, you’ll get better reception and network performance since you’re in a “less” crowded channel.</li>
</ul>

<h4 id="for-repeaters">For Repeaters</h4>

<ul>
  <li>Anything infrastructure related should have Static IP’s. So if you have Wifi repeaters in your home, set a static IP for them in the main router. This’ll prevent them from having to look for an IP everytime they’re booted, or their connection needs to be renewed. It makes resolving hosts faster as well. For Linksys routers just click on “DHCP Reservation” and look for your repeater repeater listed there. Check it and reserve an IP for it.</li>
  <li>Channel Width should be set as the same with the main router it’s connected to.</li>
  <li>Double check that your repeater is also set on the same encryption as the main router.</li>
</ul>

<h4 id="for-devices">For devices</h4>

<ul>
  <li>Unless you’re doing something out of the norm, like remote tunnels to datacenters, don’t set your DNS servers. Let the router supply them for you.</li>
  <li>If you’re using Google Chrome, flush your DNS cache. You can do this by typing this address at the chrome address bar: chrome://net-internals/#dns . Then click ‘Clear Host Cache’.</li>
</ul>

<h4 id="what-do-you-use-to-test-internet-speeds">“What do you use to test internet speeds?”</h4>

<p>I found Netflix’s <a href="https://fast.com">fast.com</a> to be much better in terms of UX and sensible defaults. It tries to simulate a download from Netflix’s Global CDN, which is probably the use case for most of the sites I visit (google, youtube, reddit, facebook, hacker news, github, etc.). <a href="https://speedtest.net">Speedtest.net</a> is great if you’re testing specifics, but for the majority of the use-cases, it’s too granular. The defaults assume I’m connecting to a local server. My browser is downloading a Dota 2 video from Youtube.com and my laptop is pushing a repo at Github.com, I’m not accessing some web page in Globe Makati.</p>

<p>I bet there are a lot more settings I’ve missed, and this is a work in progress. I’ll post a part 2 once we get the new hardware.</p>

  </article>
</section>

    </div>
    <footer class="site-footer">
  <nav class="footer-links">
    <ul class="navigation-links-list">
      <li>
        acesubido
        &mdash;
      </li>
      <li>
        <a href="/">home</a>
      </li>
      <li>
        <a href="/posts">blog</a>
      </li>
      <li>
        <a href="/feed.xml">rss feed</a>
      </li>
    </ul>
  </nav>
</footer>

<script type="text/javascript" src="/javascript/google-analytics.js"></script>

  </body>

</html>
